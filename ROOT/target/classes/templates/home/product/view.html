<th:block th:include="home/main/header.html"></th:block>
<th:block th:include="home/main/nav.html"></th:block>

<!-- 장바구니 옵션 선택 팝업 레이어를 불러오기 위한 div 지정 -->
<div id="cart_ajax_option"></div>
<div id="cart_ajax_complete"></div>
<div id="cart_ajax_sizeTable"></div>
<div id="wishlist_ajax_complete"></div>
<!-- 로그인 팝업 -->
<div id="login_popup"></div>
<!-- Q&A 팝업 -->
<div id="qna_popup">
		<span class="qna_popup btn-popup01">
			<h3 style="border-bottom: 1px solid #E4E7EA; padding-bottom: 15px;">상품문의</h3>
				<font color="red">
					게시글에 개인정보가 기록되지 않도록 주의하여 주십시오.
				</font>
				<table class="table">
					<tbody>
						<tr>
							<th scope="row" class="table-back">문의유형</th>
							<td align="left">
								<input type="radio" name="question_type" value="0" checked>사이즈
								&nbsp&nbsp&nbsp
								<input type="radio" name="question_type" value="1">디자인/색상
								&nbsp&nbsp&nbsp
								<input type="radio" name="question_type" value="2">배송/교환/반품
								&nbsp&nbsp&nbsp
								<input type="radio" name="question_type" value="3">기타
								&nbsp&nbsp&nbsp
							</td>
						</tr>
						<tr>
							<th scope="row" class="table-back">제목</th>
							<td align="left">
								<input type="text" size="70" name="name" id="question_name" required><br>
								※30자 이내로 입력해주세요
							</td>
						</tr>
						<tr>
							<th scope="row" class="table-back">내용</th>
							<td align="left">
								<textarea style="resize: none;" rows="12" cols="70" id="question_contents" name="contents" placeholder="문의 내용을 입력해 주세요." required></textarea><br>
								※ 상품과 관련없는 내용은 통보 없이 삭제될 수 있습니다.
							</td>
						</tr>
					</tbody>
				</table> 
				<input type="hidden" id="product_no" th:value="${product.no}">
				<a style="cursor: pointer" onclick="product_question_add()" class="button">등록하기</a>
		  		<a style="cursor: pointer" onclick="$(this).qnaPopupClose();" class="button">닫기</a>
		</span>		
		</div>
		
 		<main class="main">
            <nav aria-label="breadcrumb" class="breadcrumb-nav">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html"><i class="icon-home"></i></a></li>
                        <li class="breadcrumb-item"><a th:href="@{'/product/list/category/{cno}'(cno=${product.category.no})}" th:text="${product.category.name}"></a></li>
                        <li class="breadcrumb-item"><a th:href="@{'/product/list/division/{dno}'(dno=${product.division.no})}" th:text="${product.division.name}"></a></li>
                        <li class="breadcrumb-item"><a th:href="@{'/product/list/section/{sno}'(sno=${product.section.no})}" th:text="${product.section.name}"></a></li>
                        <li class="breadcrumb-item active" aria-current="page" th:text="${product.name}"></li>
                    </ol>
                </div><!-- End .container -->
            </nav>
            <div class="container">
                <div class="row">
                    <div class="col-lg-9">
                        <div class="product-single-container product-single-default">
                            <div class="row">
                                <div class="col-lg-7 col-md-6 product-single-gallery">
                                    <div class="product-slider-container product-item">
                                        <div class="product-single-carousel owl-carousel owl-theme">
                                            <div class="product-item">
                                                <img class="product-single-image" th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic1})}" data-zoom-image="assets/images/products/zoom/product-1-big.jpg"/>
                                            </div>
                                            <div class="product-item" th:if="${product.pic2}">
                                                <img class="product-single-image" th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic2})}" data-zoom-image="assets/images/products/zoom/product-2-big.jpg"/>
                                            </div>
                                            <div class="product-item" th:if="${product.pic3}">
                                                <img class="product-single-image" th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic3})}" data-zoom-image="assets/images/products/zoom/product-3-big.jpg"/>
                                            </div>
                                            <div class="product-item" th:if="${product.pic4}">
                                                <img class="product-single-image" th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic4})}" data-zoom-image="assets/images/products/zoom/product-4-big.jpg"/>
                                            </div>
                                        </div>
                                        <!-- End .product-single-carousel -->
                                    </div>
                                    <div class="prod-thumbnail row owl-dots" id='carousel-custom-dots'>
                                        <div class="col-3 owl-dot">
                                            <img th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic1})}"/>
                                        </div>
                                        <div class="col-3 owl-dot" th:if="${product.pic2}">
                                            <img th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic2})}"/>
                                        </div>
                                        <div class="col-3 owl-dot" th:if="${product.pic3}">
                                            <img th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic3})}"/>
                                        </div>
                                        <div class="col-3 owl-dot" th:if="${product.pic4}">
                                            <img th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.pic4})}"/>
                                        </div>
                                    </div>
                                </div><!-- End .col-lg-7 -->

                                <div class="col-lg-5 col-md-6">
                                    <div class="product-single-details">
                                        <h1 class="product-title" th:text="${product.name}"></h1>

                                        <div class="ratings-container">
                                            <div class="product-ratings">
                                                <span class="ratings" th:style="@{'width: {score}%'(score=${product.score * 20})}"></span><!-- End .ratings -->
                                            </div><!-- End .product-ratings -->

                                            <a href="#" class="rating-link">( <span th:text="${review.size()}"></span>개의 리뷰 )</a>
                                        </div><!-- End .product-container -->

                                        <div class="price-box">
                                            <span class="old-price" th:if="${product.discount != '0'}" th:text="@{'{price}원'(price=${#numbers.formatInteger(product.price, 0, 'COMMA')})}"></span>
                                            <span id="product_price" class="product-price" th:text="@{'{price}원'(price=${#numbers.formatInteger(product.listprice, 0, 'COMMA')})}"></span>
                                            <input type="hidden" id="original_price" th:value="${product.listprice}">
                                        </div><!-- End .price-box -->
                                        <div class="product-desc">
                                            <label>배송비</label>0원<br>
                                            <label>발송예정일</label><span th:text="${delivery}"></span><br>
                                            <label>포인트</label><span th:text="@{'{point}P 적립 예정'(point=${point})}"></span>		
                                        </div>
										
                                        <div class="product-filters-container">
                                            <div class="product-single-filter">
						                        <label>사이즈:</label>
						                        <select id="view_ajax_size" class="form-control" style="width: 200px; height:48px;" th:onchange="@{'product_view_stock(\'{no}\')'(no=${product.no})}">
													<option value="0">사이즈를 선택하세요</option>
										        	<option th:each="size : ${size}" th:value="${size.size_no.no}" th:text="${size.size_no.name}"></option>
										        </select>
						                    </div><!-- End .product-single-filter -->
						                    <div class="product-single-filter choose_first">
						                    	<div style="margin: auto !important;">
							                		<strong>※ 사이즈를 선택해주세요.</strong>
							                	</div>
						                    </div><!-- End .product-single-filter -->
						                    <div class="product-single-filter choose_color" style="display: none;">
							                	<label>색상:</label>
							                        <ul class="config-swatch-list3 view_ajax_color">
							                            <li th:each="color : ${color}" th:value="${color.color_no.no}" >
							                                <a href="#" th:onclick="@{'product_view_stock(\'{no}\', \'{color}\', \'{colorNo}\')'(no=${product.no}, color=${color.color_no.name}, colorNo=${color.color_no.no})}" th:style="@{background-color: rgb({color});(color=${color.color_no.rgb})}" th:title="${color.color_no.name}" th:text="${color.color_no.name}"></a>
							                            </li>
							                        </ul>
						                    </div><!-- End .product-single-filter -->
						                    
						                    <!-- 상품 선택시 아래 소스에 사이에 추가 -->
						                    <div id="goods_selected" onchange="change_qty()"></div>
   
                                        </div><!-- End .product-filters-container -->
                                        <div class="product-action product-all-icons">
											<a href="#" th:if="${session.user == null}" th:onclick="@{'product_order_page(\'0\',\'{no}\')'(no=${product.no})}" class="paction icon-dollar" title="구매">
						                    	<span>바로 구매&nbsp&nbsp</span>
						                    </a>
						                    <a href="#" th:unless="${session.user == null}" th:onclick="@{'product_order_page(\'{userno}\',\'{no}\')'(userno=${session.user.no}, no=${product.no})}" class="paction icon-dollar" title="구매">
						                    	<span>바로 구매&nbsp&nbsp</span>
						                    </a>
						                    <a href="#" th:onclick="@{'cart_add_view(\'{no}\')'(no=${product.no})}" class="paction add-cart" title="장바구니에 추가">
						                        <span>장바구니</span>
						                    </a>
						                    <a style="cursor: pointer;" onclick="login_popup()" class="paction add-wishlist" title="위시 리스트에 추가" th:if="${session.user == null}">
						                    	<span>위시 리스트에 추가</span>
						                    </a>
						                    <a style="cursor: pointer;" th:onclick="@{'wishlist_ajax_add(\'{no}\', \'{productno}\')'(no=${session.user.no}, productno=${product.no})}" class="paction add-wishlist" title="위시 리스트에 추가" th:unless="${session.user == null}">
						                    	<span>위시 리스트에 추가</span>
						                    </a>
                                        </div><!-- End .product-action -->
                                    </div><!-- End .product-single-details -->
                                </div><!-- End .col-lg-5 -->
                            </div><!-- End .row -->
                        </div><!-- End .product-single-container -->

                        <div class="product-single-tabs scrolling-box">
                            <div class="sticky-header" role="tablist">
                                <ul class="nav nav-tabs container">
                                    <li class="nav-item">
                                        <a class="nav-link active" id="product-tab-desc" href="#product-desc-content" data-toggle="tab">상품 설명</a>
                                    </li>
                                    <li class="nav-item" th:if="${productsize != null}">
                                        <a class="nav-link" id="product-tab-size" href="#product-size-content" data-toggle="tab">실측 사이즈</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="product-tab-tags" href="#product-information-content" data-toggle="tab">상품정보</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="product-tab-reviews" href="#product-reviews-content" data-toggle="tab">리뷰</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="product-tab-qna" href="#product-qna-content" data-toggle="tab">상품 문의</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" id="product-tab-delivery" href="#product-delivery-content" data-toggle="tab">배송/반품/교환</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="tab-pane" id="product-desc-content" role="tabpanel" aria-labelledby="product-tab-desc">
                            	<div class="expic" id="expic">
                                	<img th:if="${product.explainpic == 'sample'}" src="/uploads/sample.jpeg">
                            		<img th:if="${product.explainpic != 'sample'}" th:src="@{'/uploads/{date}/{pic}'(date=${product.regdate}, pic=${product.explainpic})}" alt="..." />
                           		</div>
                           		<br>
                            <div align="center" id="expic_button">
                            	<button class="btn btn-primary checkcrop" id="spancrop"><span style="white-space:nowrap;">상품설명 전체보기</span></button>
                            </div>
                            </div><!-- End .tab-pane --> 
                            <div class="tab-pane" id="product-size-content" role="tabpanel" aria-labelledby="product-tab-size" th:if="${productsize != null}">
                                <div class="product-size-content">
                                    <div class="row">
                                    	<div class="col-md-12">
                                           <table class="table table-bordered text-center">
											  <thead class="table-back">
											    <tr>
											      <th scope="col"></th>
											      <th th:if="${productsize.top_length != ''}" th:text="@{'전체(cm)'}"></th>
											      <th th:if="${productsize.top_shoulder != ''}" th:text="@{'어깨(cm)'}"></th>
											      <th th:if="${productsize.top_sleeve != ''}" th:text="@{'소매(cm)'}"></th>
											      <th th:if="${productsize.top_chest != ''}" th:text="@{'가슴(cm)'}"></th>
											      
											      <th th:if="${productsize.bot_length != ''}" th:text="@{'전체(cm)'}"></th>
											      <th th:if="${productsize.bot_hip != ''}" th:text="@{'엉덩이(cm)'}"></th>
											      <th th:if="${productsize.bot_rise != ''}" th:text="@{'앞밑위(cm)'}"></th>
											      <th th:if="${productsize.bot_thigh != ''}" th:text="@{'허벅지(cm)'}"></th>
											      <th th:if="${productsize.bot_under != ''}" th:text="@{'밑단(cm)'}"></th>
											      <th th:if="${productsize.bot_waist != ''}" th:text="@{'허리(cm)'}"></th>
											    </tr>
											  </thead>
											  <tbody>
											    <tr th:each="productSize : ${product.productsize}">
											      <th scope="row" th:text="${productSize.size_no.name}" class="table-back"></th>
											      <th th:if="${productSize.top_length != ''}" th:text="${productSize.top_length}" ></th>
											      <th th:if ="${productSize.top_shoulder != ''}" th:text="${productSize.top_shoulder}"></th>
											      <th th:if ="${productSize.top_sleeve != ''}" th:text="${productSize.top_sleeve}"></th>
											      <th th:if ="${productSize.top_chest != ''}" th:text="${productSize.top_chest}"></th>
											      
											      <th th:if ="${productSize.bot_length!= ''}" th:text="${productSize.bot_length}" ></th>
											      <th th:if ="${productSize.bot_hip!= ''}" th:text="${productSize.bot_hip}"></th>
											      <th th:if ="${productSize.bot_rise!= ''}" th:text="${productSize.bot_rise}"></th>
											      <th th:if ="${productSize.bot_thigh!= ''}" th:text="${productSize.bot_thigh}"></th>
											      <th th:if ="${productSize.bot_under!= ''}" th:text="${productSize.bot_under}"></th>
											      <th th:if ="${productSize.bot_waist!= ''}" th:text="${productSize.bot_waist}"></th>
											    </tr>
											    
											  </tbody>
											  
											</table>
                                        </div>
                                    </div><!-- End .row -->
                                </div><!-- End .product-size-content -->
                            </div><!-- End .tab-pane -->
                            <div class="tab-pane" id="product-information-content" role="tabpanel" aria-labelledby="product-tab-information">
                                <div class="product-tags-content">
                                    <table class="table auto-linebreak">
									  <tbody>
									  	<tr>
									      <th scope="row" class="table-back">모델명</th>
									      <td th:text="${product.modelname}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">제품소재</th>
									      <td th:text="${product.material}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">색상</th>
									      <td th:text="${product.color}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">치수</th>
									      <td th:text="${product.size}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">제조사</th>
									      <td th:text="${product.madeby}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">제조국</th>
									      <td th:text="${product.madein}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">세탁방법 / 주의사항</th>
									      <td th:text="${product.caution}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">제조년월</th>
									      <td th:text="${product.date}"></td>
									    </tr>
									    <tr>
									      <th scope="row" class="table-back">품질보증</th>
									      <td>
									      	<div>- 상품수령 후 7일 이내에 신청하실 수 있습니다. 단, 다음의 경우 해당하는 반품/교환은 신청이 불가능할 수 있습니다.</div><br>
									      	<div>- 소비자의 책임 있는 사유로 상품등이 멸실 또는 훼손된 경우</div>
									      	<div>- 소비자의 사용 또는 소비에 의해 상품 등의 가치가 현저히 감소한 경우</div>
										  	<div>- 시간의 경과에 의해 재판매가 곤란할 정도로 상품 등의 가치가 현저히 감소한 경우</div>
										  	<div>- 복제가 가능한 상품 등의 포장을 훼손한 경우</div>
										  	<div>- 소비자의 주문에 따라 개별적으로 생산되는 상품이 제작에 들어간 경우</div>
									      </td>
									    </tr>
									  </tbody>
									</table>
                                </div><!-- End .product-tags-content -->
                            </div><!-- End .tab-pane -->
    
                            <div class="tab-pane" id="product-reviews-content" role="tabpanel" aria-labelledby="product-tab-reviews">
                                <div class="product-reviews-content">
									<div class="container">
									  <div class="row">
									    <div class="col-sm">
									      <h3 class="text-uppercase heading-text-color font-weight-semibold">상품 리뷰</h3>
									    </div>
									    <div class="col-sm">
									    </div>
									    <div class="col-sm" align="right">
										    <a th:if="${session.user != null}" href="/mypage/review/write">
										      <button class="btn btn-primary">
										      	<span style="white-space:nowrap;">
										      		상품 리뷰 등록 바로가기
										      	</span>
										      </button>
										    </a>
										    <a th:if="${session.user == null}">
										      <button class="btn btn-primary" onclick="login_popup()">
										      	<span style="white-space:nowrap;">
										      		상품 리뷰 등록 바로가기
										      	</span>
										      </button>
										    </a>
									    </div>
									  </div>
									</div>
									<br>
	                                <div class="card">
										<div class="card-body" style="min-height: 0px !important;"
											align="center">
											<div class="container">				
												<div align="left">
													&#149 리뷰 작성은 마이페이지의 좌측 메뉴를 이용해주세요.
													<br>
													&#149 일반리뷰를 작성하면 즉시 100p, 포토리뷰를 작성하면 즉시 500p가 적립됩니다.
													<br>
													&#149 첨부파일을 선택하실 경우 포토리뷰, 아닐시 일반리뷰로 분류됩니다.
													<br>
													&#149 불건전한 내용을 올리실 경우 관리자가 임의로 삭제 가능하며, 적립된 포인트는 삭제됩니다.
													<br>
													&#149 한 상품에 하나의 상품평만 등록 가능합니다.
													<br>
													&#149 상품평 수정 / 삭제의 경우 마이페이지의 '나의 상품평' 메뉴에서 확인 가능하며, 삭제의 경우 적립된 포인트는 삭제됩니다.
													<br>
													&#149 한번 상품의 상품평을 삭제하면, 동일한 상품의 상품평은 다시 작성하실 수 없습니다.
												</div>
											</div>
										</div>
									</div>
    
                                    <div class="add-product-review">
    									<div id="review-pagination-load">
	                                       <table class="table">
	                                       <thead class="thead-light">
												</thead>
												<tbody th:if="${review.isEmpty() == false}">
													<div th:each="review : ${review}">
														<tr>
															<td colspan="5">
																<div class="ratings-container">점수: 
																	<div class="product-ratings">
																		<span class="ratings" th:style="@{'width: {score}%'(score=${review.score * 20})}"></span><!-- End .ratings -->
																	</div>
																</div>
																옵션: <span th:text="${review.size.name}"></span>, <span th:text="${review.color.name}"></span>
																<br>
																<br>
																<span th:utext="${review.contents_split}"></span>
																<div th:if="${review.pic1 != null || review.pic2 != null || review.pic3 != null}">
																	<br>
																	<br>		
																	<img th:if="${review.pic1}" th:src="@{'/uploads/review/{date}/{pic}'(date=${review.date}, pic=${review.pic1})}" style="max-width: 15%; display:inline;">
																	<img th:if="${review.pic2}" th:src="@{'/uploads/review/{date}/{pic}'(date=${review.date}, pic=${review.pic2})}" style="max-width: 15%; display:inline;">
																	<br>
																	<br>
																</div>
																<div th:unless="${review.pic1 != null || review.pic2 != null || review.pic3 != null}">
																	<br>
																</div>
																<button class="btn btn-primary review_before"><span style="white-space:nowrap;">더보기</span></button>							
															</td>
															<td>
															작성자: <span th:text="${review.user.name}"></span><br>
															등록일: <span th:text="${review.date}"></span>
															</td>
														</tr>
														<tr style="display: none;">
															<td colspan="5">
																<div class="ratings-container">점수: 
																	<div class="product-ratings">
																		<span class="ratings" th:style="@{'width: {score}%'(score=${review.score * 20})}"></span><!-- End .ratings -->
																	</div>
																</div>
																옵션: <span th:text="${review.size.name}"></span>, <span th:text="${review.color.name}"></span>
																<br>
																<br>
																<span th:utext="${review.contents}"></span>
																<div th:if="${review.pic1 != null || review.pic2 != null || review.pic3 != null}">
																	<img th:if="${review.pic1}" th:src="@{'/uploads/review/{date}/{pic}'(date=${review.date}, pic=${review.pic1})}" style="max-width: 70%;">
																	<img th:if="${review.pic2}" th:src="@{'/uploads/review/{date}/{pic}'(date=${review.date}, pic=${review.pic2})}" style="max-width: 70%;">
																	<br>
																	<br>
																</div>
																<div th:unless="${review.pic1 != null || review.pic2 != null || review.pic3 != null}">
																	<br>
																</div>
																<button class="btn btn-primary review_after"><span style="white-space:nowrap;">닫기</span></button>
															</td>

															<td>
															작성자: <span th:text="${review.user.name}"></span><br>
															등록일: <span th:text="${review.date}"></span>
															</td>
														</tr>
													</div>
												</tbody>						
												<tbody th:if="${review.isEmpty() == true}">
												  	<tr>
													  	<td colspan="5" class="text-center">
													  		<i class="far fa-times-circle fa-1x"></i><font size=3>등록된 리뷰가 없습니다.</font>
													  	</td>
												  	</tr>
											    </tbody>
											</table>
												<nav style="display: flex; border-top: .1rem solid #efefef; padding-top: 1.5rem;" th:if="${reviewPage.isEmpty() == false}">
													<div style="margin: auto;">
														<ul class="pagination" id="paginationajax_review">
							                                <li class="page-item" th:if="${!reviewPage.first}">
							                                    <a th:href="@{'?page={number}'(number=${reviewPage.number-1})}" class="page-link page-link-btn"><i class="icon-angle-left"></i></a>
							                                </li>
							                                <li th:each="pages: ${#numbers.sequence(0, reviewPage.totalPages-1)}" th:class=" ${reviewPage.number == pages} ? 'page-item active' : ''">
							                                    <a th:unless="${pages+1 ==0}" class="page-link" th:href="@{${#httpServletRequest.requestURI}(page=${pages})}" th:inline="text">[[${pages+1}]]</a>
							                                </li>   
							                                <li th:if="${!questionPage.last}" class="page-item">
							                                    <a th:href="@{'?page={number}'(number=${reviewPage.number+1})}" class="page-link page-link-btn"><i class="icon-angle-right"></i></a>
							                                </li>
							                            </ul>
					                            	</div>
					                            </nav>
				                            </div>
                                    </div><!-- End .add-product-review -->
                                </div><!-- End .product-reviews-content -->
                            </div><!-- End .tab-pane -->
                            <div class="tab-pane" id="product-qna-content" role="tabpanel" aria-labelledby="product-tab-qna">
                                <div class="product-reviews-content">
                                    <div class="add-product-review">
                                        <h3 class="text-uppercase heading-text-color font-weight-semibold">상품 관련 문의만 가능합니다.</h3>
											<div class="container" style="padding-bottom: 10px;">
												<div class="row">
													<div class="col-auto mr-auto">
														<a href="#">
														<span th:onclick="@{'product_question_sort(\'{productno}\', 0)'(productno=${product.no})}">
														
															<strong>
																전체(<span th:text="${productquestionOriginal.size()}"></span>)
															</strong>
														</span>
														</a>
														&nbsp&nbsp&nbsp 
														<a href="#">
															<span th:onclick="@{'product_question_sort(\'{productno}\', 1)'(productno=${product.no})}">
																답변완료(<span th:text="${productquestionComplete}"></span>)
															</span>
														</a>
													</div>
													<div class="col-auto">
														<button type="submit" th:if="${session.user == null}" onclick="login_popup()" class="btn btn-primary" style="padding: 0.4rem !important;">등록하기</button>
														<button type="submit" th:if="${session.user != null}" id="qnasubmit" class="btn btn-primary" style="padding: 0.4rem !important;">등록하기</button>
													</div>
												</div>
											</div>
											<div id="qna-pagination-load">
												<table class="table">
													<thead class="thead-light">
														<tr>
															<th scope="col" class="text-center">번호</th>
															<th scope="col" class="text-center">작성자</th>
															<th scope="col" class="text-center" width="45%">제목</th>
															<th scope="col" class="text-center">답변상태</th>
															<th scope="col" class="text-center">문의유형</th>
															<th scope="col" class="text-center">작성일</th>
														</tr>
													</thead>
													<tbody>
														<div th:each="question : ${productquestion}">
															<tr>
																<th scope="row" th:text="${question.personal_no}"></th>
																<td th:text="${question.user_no.id}"></td>
																<td>
																	<span th:text="${question.name}" style="cursor:pointer" class="question_name"></span>	
																</td>
																<td th:if="${question.status == 0}" th:text="답변대기"></td>
																<td th:if="${question.status == 1}"><strong>답변완료</strong></td>
																<td th:if="${question.type == 0}" th:text="사이즈"></td>
																<td th:if="${question.type == 1}" th:text="@{'디자인/색상'}"></td>
																<td th:if="${question.type == 2}" th:text="@{'배송/교환/반품'}"></td>
																<td th:if="${question.type == 3}" th:text="기타"></td>
																<td th:text="${question.regdate}"></td>
															</tr>
															<tr style="background-color: #E7EAED; display: none;" class="question_answer">
																<td></td>
																<td></td>
																<td colspan="4">
																	<div style="padding-bottom: 15px">
																		<div style="display:inline-block; vertical-align:top;">
																			<font size="5"><i class="icon-question-circle-o"></i></font>
																		</div>
																		<div style="display:inline-block; padding-top:10px;">
																			<span th:utext="${question.contents}"></span>
																		</div>

																	</div>
																	<div th:if="${question.status != 0}" style="border-top: 1px solid #DADEE3; padding-top: 15px; padding-bottom: 15px">
																		<div style="display:inline-block; vertical-align:top;">
																			<font size="5"><i class="icon-ok"></i></font>
																		</div>
																		<div style="display:inline-block; padding-top:10px;">
																			<span th:utext="${question.answer}" ></span>
																		</div>
																	</div>
																</td>
															</tr>
														</div>
														<tr th:if="${productquestion.size() == 0}" class="text-center">
															<td colspan="6">
																<font size="3"><i class="icon-cancel"></i>등록된 문의가 없습니다.</font>
															</td>
														</tr>
													</tbody>
												</table>
												<nav style="display: flex; border-top: .1rem solid #efefef; padding-top: 1.5rem;">
													<div style="margin: auto;">
														<ul class="pagination" id="paginationajax_question">
							                                <li class="page-item" th:if="${!questionPage.first}">
							                                    <a th:href="@{'?page={number}'(number=${questionPage.number-1})}" class="page-link page-link-btn"><i class="icon-angle-left"></i></a>
							                                </li>
							                                <li th:each="pages: ${#numbers.sequence(0, questionPage.totalPages-1)}" th:class=" ${questionPage.number == pages} ? 'page-item active' : ''">
							                                    <a th:unless="${pages+1 ==0}" class="page-link" th:href="@{${#httpServletRequest.requestURI}(page=${pages})}" th:inline="text">[[${pages+1}]]</a>
							                                </li>   
							                                <li th:if="${!questionPage.last}" class="page-item">
							                                    <a th:href="@{'?page={number}'(number=${questionPage.number+1})}" class="page-link page-link-btn"><i class="icon-angle-right"></i></a>
							                                </li>
							                            </ul>
					                            	</div>
				                            </nav>
				                     	</div>
									</div><!-- End .add-product-review -->
                                </div><!-- End .product-reviews-content -->
                            </div><!-- End .tab-pane -->
                            
                                             
                            <div class="tab-pane" id="product-delivery-content" role="tabpanel" aria-labelledby="product-tab-delivery">
                                <div class="product-reviews-content">
                                    <div class="add-product-review">
                                        <h3 class="text-uppercase heading-text-color font-weight-semibold">상품 배송 안내</h3>
                                           <table class="table auto-linebreak">
											  <tbody>
											  	<tr>
											      <th scope="row" class="table-back">공급업체</th>
											      <td><div>가상 쇼핑몰</div></td>
											    </tr>
											    <tr>
											      <th scope="row" class="table-back">배송비</th>
											      <td><div>0원</div></td>
											    </tr>
											    <tr>
											      <th scope="row" class="table-back">배송정보</th>
											      <td><div><span th:text="${delivery}"></span></div></td>
											    </tr>
											  </tbody>
											</table>
											<br>
											<h3 class="text-uppercase heading-text-color font-weight-semibold">취소/반품/교환 안내</h3>
                                           	<table class="table auto-linebreak">
											  <tbody>
											  	<tr>
											      <th scope="row" class="table-back">주문취소</th>
											      <td>
											      	<div>- 주문취소는 입금대기/입금완료에서 가능합니다.</div>
													<div>- 가구 등 주문제작상품의 경우에는 상품준비중 단계부터 불가능하며 상품 수령 후, 반품 신청을 하실 수 있습니다.</div>
												  </td>
											    </tr>
											    <tr>
											      <th scope="row" class="table-back">반품/교환 배송비</th>
											      <td>
											      	<div>- 2,500원 예상 (편도기준)</div>
													<div>- 반품/교환 배송비는 고객 변심의 경우에만 발생됩니다.</div>
													<div>- 구매 후 반품/교환 시 예상금액과 차이가 있을 수 있습니다.</div>
											      </td>
											    </tr>
											    <tr>
											      <th scope="row" class="table-back">반품/교환안내</th>
											      <td>
											      	<div>- 반품/교환은 상품 수령일 7일 이내에 신청해주셔야 합니다.</div>
											      	<div>- 단순 고객변심으로 인한 왕복 배송비는 고객님께서 부담하셔야 합니다.</div>
													<div>- 표시광고와 상이하여 상품에 하자가 있는 경우 상품수령 후 3개월 이내, 해당사실을 안(알 수 있었던)날로부터 30일 이내에 교환/반품을 신청을 할 수 있습니다.</div>
													<div>- 반품/교환 시 제품 원형 그대로 보내 주셔야 가능 합니다.</div>
													<div>- 반품/교환은 꼭 승인과정을 거쳐서 진행해주세요.</div>
													<div>- 신청/승인 과정 없이 고객님께서 직접 제품을 보내실 경우 택배사에서 추가 배송비를 요구할 수 있습니다.</div>
													<div>- 정해진 반품장소가 아닌 곳으로 보내질 경우 수취거부로 인해 왕복 배송비가 부과될 수 있습니다.</div>
											      </td>
											    </tr>
											    <tr>
											      <th scope="row" class="table-back">반품/교환 불가 안내</th>
											      <td>
											      	<div>- 고객님이 상품 포장을 개봉하여 사용 또는 설치 완료되어 상품의 가치가 훼손된 경우(단, 내용 확인을 위한 포장 개봉의 경우는 예외, 가전/디지털 미개봉 새 상품은 개봉 및 설치 후 기능 상 하자가 아닌 단순변심으로 인한 반품은 불가합니다.)</div>
													<div>- 고객님의 단순변심으로 인한 교환/반품 신청이 상품 수령한 날로부터 7일이 경과한 경우</div>
													<div>- 고객님의 사용 또는 일부 소비에 의해 상품의 가치가 훼손된 경우</div>
													<div>- 시간 경과에 따라 재판매가 어려운 상품 등의 가치가 현저히 감소한 경우(신선식품의 경우 선도저하 및 상품불량일 경우 수령일로부터 1~2일 내 교환/반품 신청)</div>
													<div>- 복제가 가능한 재화 등의 포장을 훼손한 경우(포장인증된 전자제품, DVD,CD 도서 등 복제 가능한 상품)</div>
													<div>- 배송된 상품이 하자 없음을 확인한 후 설치가 완료된 상품의 경우(가전,가구,헬스기구 등)</div>
													<div>- 고객님의 요청에 따라 개별적으로 주문제작되는 상품의 경우(수제화, 귀금속 등)</div>
													<div>- 구매한 상품의 구성품이 누락된 경우(화장품 세트, 의류부착 악세서리, 가전제품 부속품,사은품 등)</div>
													<div>- 기타,상품의 교환, 환불 및 상품 결함 등의 보상은 재정경제부고시,소비자피해보상규정에 의함</div>
											      </td>
											    </tr>
											  </tbody>
											</table>
											<br>
											<h3 class="text-uppercase heading-text-color font-weight-semibold">환불 안내</h3>
											<table class="table auto-linebreak">
											  <tbody>
											  	<tr>
											      <th scope="row" class="table-back">카드 결제 환불</th>
											      <td>
											      	<div>- 결제 당일 취소는 카드사 홈페이지에서 당일 취소확인이 가능합니다.</div>
													<div>- 익일 취소일 경우 카드사 사정에 따라 3-7일 후 해당 카드사 홈페이지에서 취소 내역을 확인하실 수 있습니다.</div>
											      </td>
											    </tr>
											    <tr>
											      <th scope="row" class="table-back">현금결제</th>
											      <td>
											      	<div>- 취소/반품 신청 시, 환불계좌를 등록하시면 물류 센터에서 반품제품을 확인한 뒤 영업일 3일 이내에 환불처리 됩니다.</div>
											      </td>
											    </tr>
											  </tbody>
											</table>	
                                    </div><!-- End .add-product-review -->
                                </div><!-- End .product-reviews-content -->
                            </div><!-- End .tab-pane -->
                            
                        </div><!-- End .product-single-tabs -->
                    </div><!-- End .col-lg-9 -->

                    <div class="sidebar-overlay"></div>
                    <div class="sidebar-toggle"><i class="icon-sliders"></i></div>
                    <aside class="sidebar-product col-lg-3 padding-left-lg mobile-sidebar">
                        <div class="sidebar-wrapper">

                            <div class="widget widget-info">
                                <ul>
                                    <li>
                                        <i class="icon-shipping"></i>
                                        <h4>100%무료 배송료
                                        </h4>
                                    </li>
                                    <li>
                                        <i class="icon-us-dollar"></i>
                                        <h4>품질 보증</h4>
                                    </li>
                                    <li>
                                        <i class="icon-online-support"></i>
                                        <h4>온라인 지원센터</h4>
                                    </li>
                                </ul>
                            </div><!-- End .widget -->

							<!-- 추후 이벤트 구상.. -->
                            <div class="widget widget-banner">
                                <div class="banner banner-image">
                                    <a href="#">
                                        <img th:src="@{'/uploads/{regdate}/{pic}'(regdate=${product.regdate}, pic=${product.pic1})}" alt="Banner Desc">
                                    </a>
                                </div><!-- End .banner -->
                            </div><!-- End .widget -->

                            <div class="widget widget-featured">
                                <h3 class="widget-title"><span th:text="${product.division.name}"></span> 관련 상품</h3>
                                
                                <div class="widget-body">
                                    <div class="owl-carousel widget-featured-products">
                                        <div class="featured-col">
                                            <div class="product product-sm" th:each="divisionProduct : ${productDivision}">
                                                <figure class="product-image-container">
                                                    <a th:href="@{'/product/view/{no}'(no=${divisionProduct.no})}" target="_blank" class="product-image" >
                                                        <img th:src="@{'/uploads/{regdate}/{pic}'(regdate=${divisionProduct.regdate}, pic=${divisionProduct.pic1})}" alt="product">
                                                    </a>
                                                </figure>
                                                <div class="product-details">
                                                    <h2 class="product-title">
                                                        <a th:href="@{'/product/view/{no}'(no=${divisionProduct.no})}" th:text="${divisionProduct.name}" target="_blank"></a>
                                                    </h2>
                                                    <div class="ratings-container">
                                                        <div class="product-ratings">
                                                            <span class="ratings" style="width:80%"></span><!-- End .ratings -->
                                                        </div><!-- End .product-ratings -->
                                                    </div><!-- End .product-container -->
                                                    <div class="price-box">
                                                        <span class="product-price" th:text="@{'{price}원'(price=${#numbers.formatInteger(divisionProduct.listprice, 0, 'COMMA')})}"></span>
                                                    </div><!-- End .price-box -->
                                                </div><!-- End .product-details -->
                                            </div><!-- End .product -->
                                        </div><!-- End .featured-col -->
                                    </div><!-- End .widget-featured-slider -->
                                </div><!-- End .widget-body -->
                            </div><!-- End .widget -->
                        </div>
                    </aside><!-- End .col-md-3 -->
                </div><!-- End .row -->
            </div><!-- End .container -->

            <div class="featured-section">
                <div class="container">
                    <h2 class="carousel-title"><span th:text="${product.category.name}"></span> 관련 상품</h2>

                    <div class="featured-products owl-carousel owl-theme owl-dots-top">
                        <div class="product" th:each="categoryProduct : ${productCategory}">
                            <figure class="product-image-container">
                                <a th:href="@{'/product/view/{no}'(no=${categoryProduct.no})}" target="_blank" class="product-image">
                                    <img th:src="@{'/uploads/{regdate}/{pic}'(regdate=${categoryProduct.regdate}, pic=${categoryProduct.pic1})}" alt="product">
                                </a>
                                <a th:href="@{'/product/quickview/{no}'(no=${categoryProduct.no})}" class="btn-quickview" >상품 미리보기</a>
                            </figure>
                            <div class="product-details">
                                <div class="ratings-container">
                                    <div class="product-ratings">
                                        <span class="ratings" style="width:80%"></span><!-- End .ratings -->
                                    </div><!-- End .product-ratings -->
                                </div><!-- End .product-container -->
                                <h2 class="product-title">
                                    <a th:href="@{'/product/view/{no}'(no=${categoryProduct.no})}" target="_blank" th:text="${categoryProduct.name}"></a>
                                </h2>
                                <div class="price-box">
                                    <span class="product-price" th:text="@{'{price}원'(price=${#numbers.formatInteger(categoryProduct.listprice, 0, 'COMMA')})}"></span>
                                </div><!-- End .price-box -->

                                <div class="product-action">
                                     <a style="cursor: pointer;" onclick="login_popup()" class="paction add-wishlist" title="위시 리스트에 추가" th:if="${session.user == null}">
                      					<span>위시 리스트에 추가</span>
                       				 </a>
			                         <a style="cursor: pointer;" th:onclick="@{'wishlist_ajax_add(\'{no}\', \'{productno}\')'(no=${session.user.no}, productno=${categoryProduct.no})}" class="paction add-wishlist" title="위시 리스트에 추가" th:unless="${session.user == null}">
			                         	<span>위시 리스트에 추가</span>
			                         </a>

                        			  <a style="cursor: pointer;" class="paction add-cart" title="장바구니에 추가" th:onclick="@{'cartOptionAjax(\'{no}\')'(no=${categoryProduct.no})}">
                            			<span>장바구니에 추가</span>
                        			  </a>
                        		      <a th:href="@{'/product/view/{no}'(no=${categoryProduct.no})}" class="paction icon-magnifier" title="새창으로 보기" target="_blank">
                            			<span>새창으로 보기</span>
                        			  </a>
                                </div><!-- End .product-action -->
                            </div><!-- End .product-details -->
                        </div><!-- End .product -->
                    </div><!-- End .featured-proucts -->
                </div><!-- End .container -->
            </div><!-- End .featured-section -->
        </main><!-- End .main -->
 <th:block th:include="home/main/footer.html"></th:block>