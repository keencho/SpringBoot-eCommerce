        <footer class="footer">
            <div class="footer-middle">
                <div class="container">
                    <div class="footer-ribbon">
                        Get in touch
                    </div><!-- End .footer-ribbon -->
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="widget">
                                <h4 class="widget-title">프로젝트 정보 확인</h4>
                                <ul class="contact-info">
                                    <li>
                                        <span class="contact-info-label">소스확인</span>
                                        <a href="https://github.com/keencho/SpringBoot-eCommerce" target="_blank">Github Link</a>
                                    </li>
                                    <li>
                                        <span class="contact-info-label">전화번호</span>010-3457-8021</a>
                                    </li>
                                    <li>
                                        <span class="contact-info-label">이메일</span> 
                                        seyoung050412@gmail.com
                                        seyoung1231@naver.com
                                    </li>
                                </ul>
                                <div class="social-icons">
                                    <a href="#" class="social-icon" target="_blank"><i class="icon-facebook"></i></a>
                                    <a href="#" class="social-icon" target="_blank"><i class="icon-twitter"></i></a>
                                    <a href="#" class="social-icon" target="_blank"><i class="icon-linkedin"></i></a>
                                </div><!-- End .social-icons -->
                            </div><!-- End .widget -->
                        </div><!-- End .col-lg-3 -->

                        <div class="col-lg-9">
                            <div class="widget widget-newsletter">
                                <h4 class="widget-title">프로젝트 정보</h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Spring Boot, Maven, Thymeleaf를 사용한 가상 쇼핑몰 프로젝트 입니다.</p>
                                    </div><!-- End .col-md-6 -->

                                    <div class="col-md-6">
                                        <form action="#">
                                            <input type="email" class="form-control" placeholder="Email address" required>

                                            <input type="submit" class="btn" value="Subscribe">
                                        </form>
                                    </div><!-- End .col-md-6 -->
                                </div><!-- End .row -->
                            </div><!-- End .widget -->

                            <div class="row">
                                <div class="col-md-5">
                                    <div class="widget">
                                        <h4 class="widget-title">My Account</h4>

                                        <div class="row">
                                            <div class="col-sm-6 col-md-5">
                                                <ul class="links">
                                                    <li><a href="about.html">About Us</a></li>
                                                    <li><a href="contact.html">Contact Us</a></li>
                                                    <li><a href="my-account.html">My Account</a></li>
                                                </ul>
                                            </div><!-- End .col-sm-6 -->
                                            <div class="col-sm-6 col-md-5">
                                                <ul class="links">
                                                    <li><a href="#">Orders History</a></li>
                                                    <li><a href="#">Advanced Search</a></li>
                                                    <li><a href="#" class="login-link">Login</a></li>
                                                </ul>
                                            </div><!-- End .col-sm-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .widget -->
                                </div><!-- End .col-md-5 -->

                                <div class="col-md-7">
                                    <div class="widget">
                                        <h4 class="widget-title">Main Features</h4>
                                        
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <ul class="links">
                                                    <li><a href="#">Super Fast Magento Theme</a></li>
                                                    <li><a href="#">1st Fully working Ajax Theme</a></li>
                                                    <li><a href="#">20 Unique Homepage Layouts</a></li>
                                                </ul>
                                            </div><!-- End .col-sm-6 -->
                                            <div class="col-sm-6">
                                                <ul class="links">
                                                    <li><a href="#">Powerful Admin Panel</a></li>
                                                    <li><a href="#">Mobile & Retina Optimized</a></li>
                                                </ul>
                                            </div><!-- End .col-sm-6 -->
                                        </div><!-- End .row -->
                                    </div><!-- End .widget -->
                                </div><!-- End .col-md-7 -->
                            </div><!-- End .row -->
                        </div><!-- End .col-lg-9 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .footer-middle -->

            <div class="container">
                <div class="footer-bottom">
                    <p class="footer-copyright">Porto eCommerce. &copy;  2018.  All Rights Reserved</p>

                    <img src="/home/assets/images/payments.png" alt="payment methods" class="footer-payments">
                </div><!-- End .footer-bottom -->
            </div><!-- End .container -->
        </footer><!-- End .footer -->
    </div><!-- End .page-wrapper -->

    <div class="mobile-menu-overlay"></div><!-- End .mobil-menu-overlay -->

    <div class="mobile-menu-container">
        <div class="mobile-menu-wrapper">
            <span class="mobile-menu-close"><i class="icon-cancel"></i></span>
            <nav class="mobile-nav">
                <ul class="mobile-menu">
                    <li class="active"><a href="index.html">Home</a></li>
                    <li>
                        <a href="category.html">Categories</a>
                        <ul>
                            <li><a href="category.html">Full Width Banner</a></li>
                            <li><a href="category-banner-boxed-slider.html">Boxed Slider Banner</a></li>
                            <li><a href="category-banner-boxed-image.html">Boxed Image Banner</a></li>
                            <li><a href="category.html">Left Sidebar</a></li>
                            <li><a href="category-sidebar-right.html">Right Sidebar</a></li>
                            <li><a href="category-flex-grid.html">Product Flex Grid</a></li>
                            <li><a href="category-horizontal-filter1.html">Horizontal Filter 1</a></li>
                            <li><a href="category-horizontal-filter2.html">Horizontal Filter 2</a></li>
                            <li><a href="#">Product List Item Types</a></li>
                            <li><a href="category-infinite-scroll.html">Ajax Infinite Scroll<span class="tip tip-new">New</span></a></li>
                            <li><a href="category.html">3 Columns Products</a></li>
                            <li><a href="category-4col.html">4 Columns Products</a></li>
                            <li><a href="category-5col.html">5 Columns Products</a></li>
                            <li><a href="category-6col.html">6 Columns Products</a></li>
                            <li><a href="category-7col.html">7 Columns Products</a></li>
                            <li><a href="category-8col.html">8 Columns Products</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="product.html">Products</a>
                        <ul>
                            <li>
                                <a href="#">Variations</a>
                                <ul>
                                    <li><a href="product.html">Horizontal Thumbnails</a></li>
                                    <li><a href="product-full-width.html">Vertical Thumbnails<span class="tip tip-hot">Hot!</span></a></li>
                                    <li><a href="product.html">Inner Zoom</a></li>
                                    <li><a href="product-addcart-sticky.html">Addtocart Sticky</a></li>
                                    <li><a href="product-sidebar-left.html">Accordion Tabs</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Variations</a>
                                <ul>
                                    <li><a href="product-sticky-tab.html">Sticky Tabs</a></li>
                                    <li><a href="product-simple.html">Simple Product</a></li>
                                    <li><a href="product-sidebar-left.html">With Left Sidebar</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="#">Product Layout Types</a>
                                <ul>
                                    <li><a href="product.html">Default Layout</a></li>
                                    <li><a href="product-extended-layout.html">Extended Layout</a></li>
                                    <li><a href="product-full-width.html">Full Width Layout</a></li>
                                    <li><a href="product-grid-layout.html">Grid Images Layout</a></li>
                                    <li><a href="product-sticky-both.html">Sticky Both Side Info<span class="tip tip-hot">Hot!</span></a></li>
                                    <li><a href="product-sticky-info.html">Sticky Right Side Info</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Pages<span class="tip tip-hot">Hot!</span></a>
                        <ul>
                            <li><a href="cart.html">Shopping Cart</a></li>
                            <li>
                                <a href="#">Checkout</a>
                                <ul>
                                    <li><a href="checkout-shipping.html">Checkout Shipping</a></li>
                                    <li><a href="checkout-shipping-2.html">Checkout Shipping 2</a></li>
                                    <li><a href="checkout-review.html">Checkout Review</a></li>
                                </ul>
                            </li>
                            <li><a href="about.html">About</a></li>
                            <li><a href="#" class="login-link">Login</a></li>
                            <li><a href="forgot-password.html">Forgot Password</a></li>
                        </ul>
                    </li>
                    <li><a href="blog.html">Blog</a>
                        <ul>
                            <li><a href="single.html">Blog Post</a></li>
                        </ul>
                    </li>
                    <li><a href="contact.html">Contact Us</a></li>
                    <li><a href="#">Special Offer!<span class="tip tip-hot">Hot!</span></a></li>
                    <li><a href="#">Buy Porto!</a></li>
                </ul>
            </nav><!-- End .mobile-nav -->

            <div class="social-icons">
                <a href="#" class="social-icon" target="_blank"><i class="icon-facebook"></i></a>
                <a href="#" class="social-icon" target="_blank"><i class="icon-twitter"></i></a>
                <a href="#" class="social-icon" target="_blank"><i class="icon-instagram"></i></a>
            </div><!-- End .social-icons -->
        </div><!-- End .mobile-menu-wrapper -->
    </div><!-- End .mobile-menu-container -->

    <a id="scroll-top" href="#top" title="Top" role="button"><i class="icon-angle-up"></i></a>
<div id="script-reload">
</div>
    <!-- Plugins JS File -->
    <script src="/home/assets/js/jquery.min.js"></script>
    <script src="/home/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/home/assets/js/plugins.min.js"></script>
    <script src="/home/assets/js/nouislider.min.js"></script>

    <!-- Main JS File -->
    <script src="/home/assets/js/main.min.js?ver=2"></script>
    
    <!-- Custom JS File -->
    <script src="/home/assets/js/custom.js?ver=42"></script>
    <!-- .load()메소드를 사용했을시 main.js를 다시 불러오기 위한 reload function -->
    <script src="/home/assets/js/reload_main.js"></script>
    
    <!-- 아임포트 결제 데모 -->
     <script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>
    <script>
function cart_order_page(no){
	if(no == -1) {
		alert("장바구니에 상품이 없습니다.");
	} else if(no == 0) {
		var productList = new Array();
		for(var i = 0; i < $(".cart_count").length; i ++){
			 var productData = new Object();
			 var productno = $("input[name='hidden_cart_no']").eq(i).val();
			 var option = $("input[name='hidden_option']").eq(i).val();
			 var str = option.split('/');
			 var size = str[0];
			 var color = str[1];
			 var qty = $('input[name=product_qty]').eq(i).val();
			 
			 productData.no = productno;
			 productData.size = size;
			 productData.color = color;
			 productData.qty = qty;
			 
			 productList.push(productData);
		}
		var jsonProductData = JSON.stringify(productList);
			 $.ajax({
		        type : "POST",
		        contentType: 'application/json',
		        dataType : "json",
		        url : "/checkout/jsonData",
		        data : jsonProductData,
		        success : function(data) {
		              location.href="/checkout/getForm";
		        },
		        error : function(e) {
		               alert('서버 연결 도중 에러가 났습니다. 다시 시도해 주십시오.');
		        }
		});
	} else if (no == 1){
		 var check = confirm("비회원으로 구매를 진행하시면 추후 교환/환불 등에 어려움이 있을 수 있고, 포인트를 적립하실 수 없습니다.\n그래도 비회원으로 구매하시겠습니까?");
		 var url="/user/loginPopup";
		 if (check == true){
			 var productList = new Array();
				for(var i = 0; i < $(".cart_count").length; i ++){
					 var productData = new Object();
					 var productno = $("input[name='hidden_cart_no']").eq(i).val();
					 var option = $("input[name='hidden_option']").eq(i).val();
					 var str = option.split('/');
					 var size = str[0];
					 var color = str[1];
					 var qty = $('input[name=product_qty]').eq(i).val();
					 
					 productData.no = productno;
					 productData.size = size;
					 productData.color = color;
					 productData.qty = qty;
					 
					 productList.push(productData);
				}
				var jsonProductData = JSON.stringify(productList);
					 $.ajax({
				        type : "POST",
				        contentType: 'application/json',
				        dataType : "json",
				        url : "/checkout/jsonData",
				        data : jsonProductData,
				        success : function(data) {
				              location.href="/checkout/getForm";
				        },
				        error : function(e) {
				               alert('서버 연결 도중 에러가 났습니다. 다시 시도해 주십시오.');
				        }
				});
		 } else {
			 $("#login_popup").css({
					"top": (($(window).height()-$("#login_popup").outerHeight())/2+$(window).scrollTop())+"px",
					"left": (($(window).width()-$("#login_popup").outerWidth())/2+$(window).scrollLeft())+"px",
				 });
				$("#login_popup").load(url + " #modal-wrapper").fadeIn(300);
		 }
	}
}

// 주소지 선택시 active 추가 / 삭제
$(document).on("click", ".address_box_change", function() {
	if ($(this).parent().parent().hasClass('active') == false) {
		$('.shipping-address-box').removeClass('active');
		$(this).parent().parent().addClass('active');
		$(".active-data").removeClass('active_jquery');
		$(this).parent().children(".active-data").addClass('active_jquery');
	}
});

// 주소지 수정시 modal에 데이터 전송
$(document).on("click", ".modaldata", function() {
	$('.updateModal_name').val($(this).data('name'));
	$('.updateModal_phone').val($(this).data('phone'));
	$('.updateModal_zipcode').val($(this).data('zipcode'));
	$('.updateModal_address').val($(this).data('address'));
	$('.updateModal_detailaddress').val($(this).data('detailaddress'));
	$('.updateModal_reference').val($(this).data('reference'));
	$('.updateModal_no').val($(this).data('addressno'));
	$('.updateModal_basic').val($(this).data('basic'));
});

// 주문 페이지 주소지 선택 -> 주소지 수정
function modal_address_update_ajax() {
	var no = $("input[name=modal_no]").val();
	var name = $("input[name=modal_name]").val();
	var phone = $("input[name=modal_phone]").val();
	var zipcode = $("input[name=modal_zipcode]").val();
	var address = $("input[name=modal_address]").val();
	var detailaddress = $("input[name=modal_detailaddress]").val();
	var reference = $("input[name=modal_reference]").val();
	var basic = $("input[name=modal_basic]").val();
	if(name == ''){
		alert("이름을 입력하세요");
	} else if(phone == ''){
		alert("휴대폰 번호를 입력하세요");
	} else if(zipcode == ''){
		alert("우편번호를 입력하세요");
	} else if(address == ''){
		alert("주소를 입력하세요");
	} else if(detailaddress == ''){
		alert("상세주소를 입력하세요");
	} else if(reference == ''){
		alert("참고항목을 입력하세요");
	} else {
		$.ajax({
				url : "/user/updateAddress",
				type : "POST",
				data : {
					"no" : no,
					"name" : name,
					"phone" : phone,
					"zipcode" : zipcode,
					"address" : address,
					"detailaddress" : detailaddress,
					"reference" : reference
				},
				dataType : "html",
				success : function() {
					$('#updateAddressModal').modal("hide");
					$('#address_id' + no).remove();
					$("#address_parent_id" + no).append(
						"<div id='address_id" + no + "'>"
					  + "<div class='address_box_change'>"
					  + "<address>"
					  + "(<span>" + zipcode + "</span>)<br>"
					  + "<span>" + address + "</span><br>"
					  + "<span>" + detailaddress + "</span><br>"
					  + "<span>" + reference + "</span><br>"
					  + "<span>" + name + "</span><br>"
					  + "<span>" + phone + "</span><br>"
					  + "</address></div>"
					  + "<a href='#' data-toggle='modal' data-target='#updateAddressModal' data-name='" + name + "' data-phone='" + phone + "' data-zipcode='" + zipcode + "' "
					  + "data-address='" + address +"' data-detailaddress='" + detailaddress + "' data-reference='" + reference + "' data-addressno='" + no + "' class='btn btn-sm btn-outline-secondary modaldata"
					  + (basic == 0 ? ' active-data active_jquery' : ' active-data')
					  + "'>"
					  + "수정</a>"
					  + (basic == 0 ? "<span class='float-right'><strong>기본 배송지</strong></span>" : '')
					  + "</div>"
					  + "</div>");			 
				},
				error : function() {
					alert("수정에 실패하였습니다. 다시 시도해주세요");
				}
			});
	}
}


// 배송지 추가전 값 검증
function modalAddAddress(no) {
	$.ajax({
		url : "/user/checkAddress",
		type : "POST",
		data : {
			"user_no" : no
		},
		dataType : "html",
		success : function(result) {
			if (result >= 5){
				alert("최대로 저장할 수 있는 주소록의 갯수는 5개입니다.");
			} else {
				$('#addressModal').modal("show");
			}
		},
		error : function() {
			alert("다시 시도해주세요");
		}
	});
	
}

//주문 페이지 주소지 선택 -> 주소지 추가
function modal_address_new_ajax(no) {
	var name = $("input[name=modal_new_name]").val();
	var phone = $("input[name=modal_new_phone]").val();
	var zipcode = $("input[name=modal_new_zipcode]").val();
	var address = $("input[name=modal_new_address]").val();
	var detailaddress = $("input[name=modal_new_detailaddress]").val();
	var reference = $("input[name=modal_new_reference]").val();
	if(name == ''){
		alert("이름을 입력하세요");
	} else if(phone == ''){
		alert("휴대폰 번호를 입력하세요");
	} else if(zipcode == ''){
		alert("우편번호를 입력하세요");
	} else if(address == ''){
		alert("주소를 입력하세요");
	} else if(detailaddress == ''){
		alert("상세주소를 입력하세요");
	} else if(reference == ''){
		alert("참고항목을 입력하세요");
	} else {
		$.ajax({
			url : "/user/addAddress",
			type : "POST",
			data : {
				"user_no" : no,
				"name" : name,
				"phone" : phone,
				"zipcode" : zipcode,
				"address" : address,
				"detailaddress" : detailaddress,
				"reference" : reference
			},
			dataType : "html",
			success : function(result) {
				$('#addressModal').modal("hide");
				$('.shipping-address-box').removeClass('active');
				$(".active-data").removeClass('active_jquery');
				$(".add-address-apppend").append(
					"<div id='address_parent_id" + result + "' class='shipping-address-box active'>"
				  + "<div id='address_id" + result + "'>"
				  + "<div class='address_box_change'>"
				  + "<address>"
				  + "(<span>" + zipcode + "</span>)<br>"
				  + "<span>" + address + "</span><br>"
				  + "<span>" + detailaddress + "</span><br>"
				  + "<span>" + reference + "</span><br>"
				  + "<span>" + name + "</span><br>"
				  + "<span>" + phone + "</span><br>"
				  + "</address></div>"
				  + "<a href='#' data-toggle='modal' data-target='#updateAddressModal' data-name='" + name + "' data-phone='" + phone + "' data-zipcode='" + zipcode + "' "
				  + "data-address='" + address +"' data-detailaddress='" + detailaddress + "' data-reference='" + reference + "' data-addressno='" + result + "'data-basic='1' class='btn btn-sm btn-outline-secondary modaldata active-data active_jquery'>"
				  + "수정</a>"
				  + "</div>"
				  + "</div>");
			},
			error : function() {
				alert("저장에 실패하였습니다. 다시 시도해주세요.");
			}
		});
	}
}

//주소지 방식 변경
$(document).on("change", "input[name='addressType']", function() {
	if($(this).val() == "exist"){
		$('.new-address-append').hide();
		$('.add-address-apppend').show();
		$('.modalAddAddress').show();
	} else if ($(this).val() == "new"){
		$('.add-address-apppend').hide();
		$('.modalAddAddress').hide();
		$('.new-address-append').show();
	}
});

// 주소지 방식 기본(비회원)
$( document ).ready(function() {
	if ($("input[name='addressType']").val() == "new"){
		$('.new-address-append').show();
	}
});

// 장바구니 총합 계산
$(document).ready(function () {
	var total = 0;
	 $("input[name='checkout_each_price']").each(function() {
		total += parseInt($(this).val());
	});
	 $(".checkout_user_point").text(Math.round(total/1000));
	 $(".checkout_total_price").text(total.toLocaleString('en')+"원");
	 $("input[name='checkout_hidden_point']").val(Math.round(total/1000));
	 $("input[name='checkout_hidden_total']").val(total);
});

// 포인트 체크박스 감지하여 disabled 속성 추가 / 해제
$(document).on("change", "#address-save" ,function(){
	if($(this).is(":checked")){
		$("input[name='user_point']").attr("disabled", false);
		$("#point_access").show();
	} else {
		$("input[name='user_point']").attr("disabled", true);
		$("#point_access").hide();
	}
	
});

// 포인트 검증후 결제 금액에 반영
function point_verify(no){
	var total = $("input[name='checkout_hidden_total']").val();
	var point = $("input[name='user_point']").val();
	var current_point = $("#user_current_point").val();
	var use_point = $("#user_point").val();
	if(current_point - point < 0) {
		alert("입력하신 포인트가 적용 가능한 남은 포인트보다 많습니다.");
	}
	else if (isNaN(point) == true || point == '' || point == 0 || point < 0){
		alert("올바른 값을 입력해주세요");
	} else {
		$.ajax({
			url : "/user/checkPoint",
			type : "POST",
			data : {
				"no" : no,
				"point" : point
			},
			dataType : "html",
			success : function(result) {
				if(result == 0){
					$("#point_success").hide();
					$("#point_success").show();
					$("input[name='checkout_hidden_total']").val(total-point);			
					$(".checkout_total_price").text((total-point).toLocaleString('en')+"원");
					$("#user_current_point").val(current_point-point);
					$("#span_current_point").text((current_point-point));
					$("#user_point").val(Number(use_point) + Number(point));
				} else if(result == 1){
					alert("사용하실 수 없는 포인트입니다. 확인후 다시 시도해주세요.");
				}
			}
		});
	}
}

// 상품 구매
function payment(no) {
	var addressType = $('input[name=addressType]:checked').val();
	var paytype = $('input[name=shipping-method]:checked').val();

	if(paytype == 'deposit'){	// 계좌이체의 경우
		payment_deposit(no, addressType);
	} else if(paytype == 'card'){	// 카드 결제의 경우
		payment_card(no, addressType);
	}
}

// 상품 구매 - 카드
function payment_card(no, addressType){
	var point = 0;
	var message = '';
	var account_bank = $("select[name=account]").val();
	var account_name = $("input[name=account_name]").val();
	var total_price = $("input[name=checkout_hidden_total]").val();
	var order_password = '';
	var product_name = '';
	for(var i=0; i<$(".product_name_ajax").length; i++){
		product_name += $(".product_name_ajax").eq(i).text() + "/"; 
	}
	product_name = product_name.substr(0, product_name.length -1);
	if (addressType == 'exist'){	// 기존의 배송지 선택
		var name = $('.active_jquery').data('name');
		var phone = $('.active_jquery').data('phone');
		var address1 = $('.active_jquery').data('zipcode');
		var address2 = $('.active_jquery').data('address');
		var address3 = $('.active_jquery').data('detailaddress');
		var address4 = $('.active_jquery').data('reference');
		var address = "(" + $('.active_jquery').data('zipcode') + ")" + $('.active_jquery').data('address') + " " + $('.active_jquery').data('detailaddress') + " " + $('.active_jquery').data('reference');
	} else if (addressType == 'new'){	// 새로운 배송지 선택
		var name = $("input[name='new_name']").val();
		var phone = $("input[name='new_phone']").val();
		var address1 = $("input[name='new_zipcode']").val();
		var address2 = $("input[name='new_address']").val();
		var address3 = $("input[name='new_detailaddress']").val();
		var address4 = $("input[name='new_reference']").val();
		var address = "(" + $("input[name='new_zipcode']").val() + ")" + $("input[name='new_address']").val() + " " + $("input[name='new_detailaddress']").val() + " " + $("input[name='new_reference']").val();
		var order_password = $("input[name='new_password']").val();
		if(order_password == null){
			order_password = '';
		}		
	}
	if($("input[name='point_check']").is(":checked") == true){
		point = $("#user_point").val();
		if (point == ''){
			point = 0;
		}
	} 
	if($("input[name='message']").is(":checked") == true){
		message = $("input[name='orderer_message']").val();
	}
	if (name == ''){
		alert("이름을 입력하세요");
	} else if(no == 0 && order_password == ''){
		alert("비회원 비밀번호를 입력해주세요.");
	}else if(phone == ''){
		alert("휴대폰 번호를 입력하세요");
	} else if(address1 =='' || address2 =='' || address3 =='' || address4 ==''){
		alert("모든 주소를 입력하세요");
	} else {
		var IMP = window.IMP;
		IMP.init("imp93876938");
		
		IMP.request_pay({
			pg : 'html5_inicis',
			pay_method : 'card',
			merchant_uid : 'merchant_' + new Date().getTime(),
			name : product_name,
			amount : 100, // 가상결제 이므로 카드결제 시스템에서의 상품 가격은 100원으로 통일
			buyer_name : name,
			buyer_tel : phone,
			buyer_addr : address
		}, function(rsp) {
			if ( rsp.success ) {
				var msg = '결제가 완료되었습니다.';
				msg += '고유ID : ' + rsp.imp_uid;				// 고유 거래 번호
				msg += '상점 거래ID : ' + rsp.merchant_uid;	// 가맹점에서 생성하는 고유 주문번호
				msg += '결제 금액 : ' + rsp.paid_amount;		// 결제 금액 (1000원)
				msg += '카드 승인번호 : ' + rsp.apply_num;		// 승인 번호
				$.ajax({
					url : "/order/card",
					type : "POST",
					data : {
						"order_name" : name,
						"order_phone" : phone,
						"order_address" : address,
						"user_no" : no,
						"order_message" : message,
						"card_id" : rsp.imp_uid,
						"card_shopid" : rsp.merchant_uid,
						"card_applyno" : rsp.apply_num,
						"point" : point,
						"total_price" : total_price,
						"order_password" : order_password
					},
					dataType : "html",
					success : function() {
						$.ajax({
							url : "/order/get/lastOrder",
							type : "POST",
							dataType : "html",
							success : function(order_no){
								for(var i=0; i<$(".product_info").length; i++){
									var product_no = $("input[name='checkout_product_no']").eq(i).val();
									var product_size = $("input[name='checkout_product_size']").eq(i).val();
									var product_color = $("input[name='checkout_product_color']").eq(i).val();
									var product_qty = $("input[name='checkout_product_qty']").eq(i).val();
									var product_price = $("input[name='checkout_product_price']").eq(i).val();
									$.ajax({
										url : "/order/info/add",
										type : "POST",
										dataType : "html",
										data : {
											"order_no" : order_no,
											"product_no" : product_no,
											"size_no" : product_size,
											"color_no" : product_color,
											"qty" : product_qty,
											"price" : product_price,
										},
										success : function(){
										},
										error : function() {
											alert('결제 실패');
										}
									});
								}
								location.replace("/order/complete/" + order_no);
							}
						});
					}
				});
			} else {
				var msg = '결제에 실패하였습니다.';
				msg += '에러내용 : ' + rsp.error_msg;
			}
			alert(msg);
		});
	}
}

// 상품 구매 - 계좌이체
function payment_deposit(no, addressType){
	var point = 0;
	var message = '';
	var account_bank = $("select[name=account]").val();
	var account_name = $("input[name=account_name]").val();
	var total_price = $("input[name=checkout_hidden_total]").val();
	var order_password = '';
	if (addressType == 'exist'){	// 기존의 배송지 선택
		var name = $('.active_jquery').data('name');
		var phone = $('.active_jquery').data('phone');
		var address1 = $('.active_jquery').data('zipcode');
		var address2 = $('.active_jquery').data('address');
		var address3 = $('.active_jquery').data('detailaddress');
		var address4 = $('.active_jquery').data('reference');
		var address = "(" + $('.active_jquery').data('zipcode') + ")" + $('.active_jquery').data('address') + " " + $('.active_jquery').data('detailaddress') + " " + $('.active_jquery').data('reference');
	} else if (addressType == 'new'){	// 새로운 배송지 선택
		var name = $("input[name='new_name']").val();
		var phone = $("input[name='new_phone']").val();
		var address1 = $("input[name='new_zipcode']").val();
		var address2 = $("input[name='new_address']").val();
		var address3 = $("input[name='new_detailaddress']").val();
		var address4 = $("input[name='new_reference']").val();
		var address = "(" + $("input[name='new_zipcode']").val() + ")" + $("input[name='new_address']").val() + " " + $("input[name='new_detailaddress']").val() + " " + $("input[name='new_reference']").val();
		var order_password = $("input[name='new_password']").val();
		if(order_password == null){
			order_password = '';
		}		
	}
	if($("input[name='point_check']").is(":checked") == true){
		point = $("#user_point").val();
		if (point == ''){
			point = 0;
		}
	} 
	if($("input[name='message']").is(":checked") == true){
		message = $("input[name='orderer_message']").val();
	}
	if (name == ''){
		alert("이름을 입력하세요");
	} else if(no == 0 && order_password == ''){
		alert("비회원 비밀번호를 입력해주세요.");
	}else if(phone == ''){
		alert("휴대폰 번호를 입력하세요");
	} else if(address1 =='' || address2 =='' || address3 =='' || address4 ==''){
		alert("모든 주소를 입력하세요");
	}
	else if (account_bank == 0){
		alert("계좌를 선택해주세요!");
	} else if(account_name == ''){
		alert("올바른 입금자명을 입력해주세요!");
	} else {
		$.ajax({
			url : "/order/deposit",
			type : "POST",
			data : {
				"order_name" : name,
				"order_phone" : phone,
				"order_address" : address,
				"user_no" : no,
				"order_message" : message,
				"account_bank" : account_bank,
				"account_name" : account_name,
				"point" : point,
				"total_price" : total_price,
				"order_password" : order_password
			},
			dataType : "html",
			success : function() {
				$.ajax({
					url : "/order/get/lastOrder",
					type : "POST",
					dataType : "html",
					success : function(order_no){
						for(var i=0; i<$(".product_info").length; i++){
							var product_no = $("input[name='checkout_product_no']").eq(i).val();
							var product_size = $("input[name='checkout_product_size']").eq(i).val();
							var product_color = $("input[name='checkout_product_color']").eq(i).val();
							var product_qty = $("input[name='checkout_product_qty']").eq(i).val();
							var product_price = $("input[name='checkout_product_price']").eq(i).val();
							$.ajax({
								url : "/order/info/add",
								type : "POST",
								dataType : "html",
								data : {
									"order_no" : order_no,
									"product_no" : product_no,
									"size_no" : product_size,
									"color_no" : product_color,
									"qty" : product_qty,
									"price" : product_price,
								},
								success : function(){
								},
								error : function() {
									alert('결제 실패');
								}
							});
						}
						location.replace("/order/complete/" + order_no);
					}
				});
			},
			error : function(result){
				alert(result);
			}
		});
	}
}
 </script>
</body>

</html>